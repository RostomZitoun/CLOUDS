{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"C:/Users/Majed/Desktop/lib/covidapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Majed/Desktop/lib/covidapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Majed/Desktop/lib/covidapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Majed/Desktop/lib/covidapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./CovidPie.css';var _window=window,am4core=_window.am4core,am4charts=_window.am4charts;var CovidPie=/*#__PURE__*/function(_React$Component){_inherits(CovidPie,_React$Component);var _super=_createSuper(CovidPie);function CovidPie(){var _this;_classCallCheck(this,CovidPie);_this=_super.call(this);_this.state={am4chart:false,data:null};return _this;}_createClass(CovidPie,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){return!(nextState.data==null);}},{key:\"UNSAFE__componentWillUpdate\",value:function UNSAFE__componentWillUpdate(){if(this.state.am4chart)this.state.am4chart.dispose();}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;am4core.ready(function(){am4core.useTheme(function(target){target.list=[am4core.color(\"#c44569\"),am4core.color(\"#546de5\"),am4core.color(\"#f5cd79\")];});var chart=am4core.create(\"covidpiechart_\"+_this2.props.name,am4charts.PieChart);var pieSeries=chart.series.push(new am4charts.PieSeries());pieSeries.dataFields.value=\"count\";pieSeries.dataFields.category=\"label\";chart.radius='100px';chart.innerRadius=am4core.percent(25);pieSeries.ticks.template.disabled=true;pieSeries.alignLabels=false;pieSeries.labels.template.text=\"{value.percent.formatNumber('#.0')}%\";pieSeries.labels.template.radius=am4core.percent(-40);pieSeries.labels.template.fill=am4core.color(\"#fff\");pieSeries.labels.template.adapter.add(\"radius\",function(radius,target){if(target.dataItem&&target.dataItem.values.value.percent<10){return 0;}return radius;});pieSeries.labels.template.adapter.add(\"fill\",function(color,target){if(target.dataItem&&target.dataItem.values.value.percent<10){return am4core.color(\"#fff\");}return color;});chart.legend=new am4charts.Legend();chart.legend.markers.template.width=chart.legend.markers.template.height=10;chart.legend.fontSize=12;var marker=chart.legend.markers.template.children.getIndex(0);chart.legend.labels.template.fill=am4core.color('#fff');chart.legend.valueLabels.template.fill=am4core.color('#fff');marker.cornerRadius(3,3,3,3);_this2.setState({am4chart:chart},function(){if(_this2.state.data)chart.data=_this2.state.data;});});var execute=function execute(resp){var data=_this2.props.extract(resp);_this2.setState({data:data},function(){if(_this2.state.am4chart){var chart=_this2.state.am4chart;chart.data=data;}});};var retry=function retry(){_this2.props.load().then(function(resp){return resp.json();}).then(execute).catch(function(err){return retry;});};retry();}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"grey header\",children:this.props.title}),/*#__PURE__*/_jsxs(\"table\",{className:\"summary\",children:[/*#__PURE__*/_jsx(\"tbody\",{style:{display:!this.state.data?\"none\":\"table\"},children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{className:\"covidpiechart\",id:\"covidpiechart_\"+this.props.name})})}),this.state.data==null?/*#__PURE__*/_jsx(\"tbody\",{className:\"full\",children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]})})})}):null]})]});}}]);return CovidPie;}(React.Component);export{CovidPie as default};","map":{"version":3,"sources":["C:/Users/Majed/Desktop/lib/covidapp/src/components/CovidPie.js"],"names":["React","window","am4core","am4charts","CovidPie","state","am4chart","data","nextProps","nextState","dispose","ready","useTheme","target","list","color","chart","create","props","name","PieChart","pieSeries","series","push","PieSeries","dataFields","value","category","radius","innerRadius","percent","ticks","template","disabled","alignLabels","labels","text","fill","adapter","add","dataItem","values","legend","Legend","markers","width","height","fontSize","marker","children","getIndex","valueLabels","cornerRadius","setState","execute","resp","extract","retry","load","then","json","catch","err","title","display","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport './CovidPie.css';\r\n\r\nlet {am4core, am4charts} = window;\r\n\r\nexport default class CovidPie extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {am4chart: false, data: null};\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !(nextState.data == null);\r\n    }\r\n    \r\n    UNSAFE__componentWillUpdate() {\r\n        if ( this.state.am4chart )\r\n            this.state.am4chart.dispose();\r\n    } \r\n\r\n    componentDidMount() {\r\n        am4core.ready(() => {\r\n            am4core.useTheme(target => {\r\n                target.list = [\r\n                    am4core.color(\"#c44569\"),\r\n                    am4core.color(\"#546de5\"),\r\n                    am4core.color(\"#f5cd79\")\r\n                ];\r\n            });\r\n            \r\n            let chart = am4core.create(\"covidpiechart_\" + this.props.name, am4charts.PieChart);\r\n            let pieSeries = chart.series.push(new am4charts.PieSeries());\r\n            pieSeries.dataFields.value = \"count\";\r\n            pieSeries.dataFields.category = \"label\";\r\n\r\n            chart.radius = '100px';\r\n            chart.innerRadius = am4core.percent(25);\r\n\r\n            pieSeries.ticks.template.disabled = true;\r\n            pieSeries.alignLabels = false;\r\n            pieSeries.labels.template.text = \"{value.percent.formatNumber('#.0')}%\";\r\n            pieSeries.labels.template.radius = am4core.percent(-40);\r\n            pieSeries.labels.template.fill = am4core.color(\"#fff\");\r\n\r\n            pieSeries.labels.template.adapter.add(\"radius\", function(radius, target) {\r\n                if (target.dataItem && (target.dataItem.values.value.percent < 10)) {\r\n                    return 0;\r\n                }\r\n                return radius;\r\n            });\r\n\r\n            pieSeries.labels.template.adapter.add(\"fill\", function(color, target) {\r\n                if (target.dataItem && (target.dataItem.values.value.percent < 10)) {\r\n                    return am4core.color(\"#fff\");\r\n                }\r\n                return color;\r\n            });\r\n\r\n            chart.legend = new am4charts.Legend();\r\n            chart.legend.markers.template.width = chart.legend.markers.template.height = 10;\r\n            chart.legend.fontSize = 12;\r\n            let marker = chart.legend.markers.template.children.getIndex(0);\r\n            chart.legend.labels.template.fill = am4core.color('#fff');\r\n            chart.legend.valueLabels.template.fill = am4core.color('#fff');\r\n            marker.cornerRadius(3, 3, 3, 3);\r\n            \r\n            this.setState({am4chart: chart}, () => {\r\n                if ( this.state.data )\r\n                chart.data = this.state.data;\r\n            });\r\n        });\r\n\r\n        let execute = (resp) => {\r\n            let data = this.props.extract(resp);\r\n\r\n            this.setState({\r\n                data\r\n            }, () => {\r\n                if ( this.state.am4chart ) {\r\n                    let chart = this.state.am4chart;\r\n                    chart.data = data;\r\n                }\r\n            });\r\n        };\r\n\r\n        let retry = () => {\r\n            this.props.load().then(\r\n                resp => resp.json()\r\n            ).then(\r\n                execute\r\n            ).catch(err => retry);\r\n        }; retry();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1 className=\"grey header\">{this.props.title}</h1>\r\n                <table className=\"summary\">\r\n                    <tbody style={{display: !this.state.data ? \"none\" : \"table\"}}>\r\n                        <tr><td className=\"covidpiechart\" id={\"covidpiechart_\" + this.props.name}>\r\n                        </td></tr>\r\n                    </tbody>\r\n\r\n                    {this.state.data == null ?\r\n                        <tbody className=\"full\">\r\n                        <tr><td>\r\n                                <div className=\"loading\">\r\n                                    <div></div>\r\n                                    <div></div>\r\n                                    <div></div>\r\n                                </div>\r\n                            </td></tr>\r\n                        </tbody>\r\n                        :\r\n                        null\r\n                    }\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}